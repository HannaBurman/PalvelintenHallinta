# H4 Oma Moduuli

## Käyttöympäristö

MacBookPro 13-tuumainen 2020 <br />
MacOS Sequoia Versio 15.0.1 <br />
Prosessori: 1,4 GHz Neliytiminen Intel Core i5 <br />
Näytönohjain: Intel Iris Plus Graphics 645, 1536 Mt <br />
Muisti: 8 Gt 2133 MHz LPDDR3 <br />

Oracle VirtualBox Version 7.1.4 r165100 (Qt6.5.3) <br />
Debian GNU/Linux 12 Bookworm (64-bit) <br />
4000 MB RAM <br />
60 GB Levytilaa <br />
Vagrant ja Master/Minion SaltStackilla <br />

## Oma moduli: Mielenterveyden tukemiseen tarkoitettu oppimis- ja rentoutusympäristö

Ajattelin toteuttaa moduulin, joka luo ympäristön mielenterveyskuntoutujille ja ahdistusta kokeville käyttäjille. Moduuli sisältää rentoutus- ja mindfulness-harjoituksia, yksinkertaisia terapeuttisia työkaluja, kuten tunnepäiväkirjan, sekä mahdollisuuden kuunnella rauhoittavia äänitteitä. Tavoitteena on tarjota käyttäjälle helposti lähestyttävä ja rauhoittava digitaalinen tila.

Toteutuksessa käytän Vagrantia ja Master/Minion-rakennetta SaltStackilla, joka mahdollistaa ympäristön hallinnan ja konfiguroinnin tehokkaasti. Moduulia voisi mahdollisesti myöhemmin laajentaa esimerkiksi stressiä lievittävillä peleillä tai muilla resursseilla, sen mukaan miten tästä ensimmäisestä osasta selviän.

Olen ensimmäiseltä ammatiltani sairaanhoitaja/terveydenhoitaja (ylempi AMK) ja ratkaisukeskeinen terapeutti ja olen tehnyt koko tähänastisen työurani psykiatrian alalla. Huomaan yrittäväni inhimillistää kaiken minkä pystyn, niin kuin näköjäään myös tämän tehtävän. 

Aloitan koko projektin avaamalla terminaalin ja luomalla projektin hakemiston

    % mkdir mielenterveys
    % cd mielenterveys

Sitten vagrantfilen määritys

    % nano vagrantfile

<img width="578" alt="Näyttökuva 2024-11-26 kello 16 21 20" src="https://github.com/user-attachments/assets/d9857ac7-1642-489a-982a-ac768784cc47">

Sitten seuraavaksi käynnistän Vagrantin

    % vagrant up
    
<img width="648" alt="Näyttökuva 2024-11-26 kello 16 27 17" src="https://github.com/user-attachments/assets/fa36db11-e136-406f-9cca-9950ef0ffda2">

Tsekkaan statuksen komennolla

    % vagrant status
    
<img width="495" alt="Näyttökuva 2024-11-26 kello 16 28 01" src="https://github.com/user-attachments/assets/b04046f4-3190-401b-8bca-94b972cb5c2d">

Sitten menen sisälle t001 koneeseen

    % vagrant ssh t001

Ja annan seuraavat komennot päivittääkseni paketit

    $ sudo apt update
    
<img width="550" alt="Näyttökuva 2024-11-26 kello 16 30 23" src="https://github.com/user-attachments/assets/639e2fce-ccb8-4239-bbb3-a97877a566d7">

Sitten asennan curlin

    $ sudo apt install curl 

<img width="678" alt="Näyttökuva 2024-11-26 kello 16 32 05" src="https://github.com/user-attachments/assets/8a8530dc-9b49-4653-bb47-8607bb003ed9">

Sitten latasin saltin julkisen GPG-avaimen ja tallensin sen tiedostoon /etc/apt/keyrings/salt-archive-keyring.pgp

    $ sudo mkdir -p /etc/apt/keyrings
    $ curl -fsSL https://packages.broadcom.com/artifactory/api/security/keypair/SaltProjectKey/public | sudo tee /etc/apt/keyrings/salt-archive-keyring.pgp
    

<img width="701" alt="Näyttökuva 2024-11-26 kello 16 33 52" src="https://github.com/user-attachments/assets/4a33b914-1121-44e7-9ba7-f06505915c5d">

    $ curl -fsSL https://github.com/saltstack/salt-install-guide/releases/latest/download/salt.sources | sudo tee /etc/apt/sources.list.d/salt.sources

<img width="679" alt="Näyttökuva 2024-11-26 kello 16 34 37" src="https://github.com/user-attachments/assets/9da73201-7190-4319-8c7d-b3c401106b41">

    $ sudo apt update 

<img width="679" alt="Näyttökuva 2024-11-26 kello 16 36 50" src="https://github.com/user-attachments/assets/0267ee00-0e7c-47d1-b7fe-ec46ce12df7e">

    $ sudo apt install salt-master

<img width="693" alt="Näyttökuva 2024-11-26 kello 16 40 32" src="https://github.com/user-attachments/assets/ef1c6750-55ba-41a1-9914-a02042177206">

    $ sudo systemctl enable salt-master
    $ sudo systemctl start salt-master

Ennen kun poistuin master-koneelta, tsekkasin vielä masterin hostnamen (joka oli 10.0.2.15 192.168.88.101) ja menin sitten ulos exitillä.

    $ hostname -I
    $ exit

<img width="357" alt="Näyttökuva 2024-11-26 kello 16 42 35" src="https://github.com/user-attachments/assets/133adb0c-e7cb-46e2-8f5a-683195138215">

Sitten menen sisälle toiseen koneeseen ja tein samat asiat

    $ vagrant ssh t002
    $ sudo apt update
    $ sudo apt install curl
    $ sudo mkdir -p /etc/apt/keyrings
    $ curl -fsSL https://packages.broadcom.com/artifactory/api/security/keypair/SaltProjectKey/public | sudo tee /etc/apt/keyrings/salt-archive-keyring.pgp
    $ curl -fsSL https://github.com/saltstack/salt-install-guide/releases/latest/download/salt.sources | sudo tee /etc/apt/sources.list.d/salt.sources
    $ sudo apt update 
    $ sudo apt upgrade
    $ sudo apt install salt-minion
    $ sudo systemctl enable salt-minion
    $ sudo systemctl start salt-minion

Seuraavaksi määritän minion liittymään masteriin, avaamalla minionin konfiguraatiotiedoston komennolla

    $ sudo nano /etc/salt/minion

ja poistan täältä masterin edestä # ja lisään masterin ip:n ja määritän id:ksi minion. 

<img width="164" alt="Näyttökuva 2024-11-26 kello 16 49 55" src="https://github.com/user-attachments/assets/7fe897ab-d217-4789-85cb-1f2bd328ae7f">

    $ sudo systemctl restart salt-minion

Onko käynnissä? Tsekkaan komennolla

    $ sudo systemctl status salt-minion
    
<img width="678" alt="Näyttökuva 2024-11-26 kello 16 51 33" src="https://github.com/user-attachments/assets/190c3c12-cf42-4cd7-9a18-40bdd4fabcfb">

Jostain syystä avain on rejectattu

Käynnissä on, joten takaisin t001 koneelle ja avaimia hyväksymään

    $ exit
    % vagrant ssh t001

    $ sudo salt-key -L  
$ sudo salt-key -A  

jos ne ei onnistu, tämä onnistuu:
$ sudo salt-key -a minion

Testaus, toimiko: 

$ sudo salt '*' test.ping

Lähteenä olen tähän saakka käyttänyt omia läksyjä ja luentomuistiinpanojani (Burman 2024).









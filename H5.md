# H5 Oma Moduuli

## Käyttöympäristö

MacBookPro 13-tuumainen 2020 <br />
MacOS Sequoia Versio 15.0.1 <br />
Prosessori: 1,4 GHz Neliytiminen Intel Core i5 <br />
Näytönohjain: Intel Iris Plus Graphics 645, 1536 Mt <br />
Muisti: 8 Gt 2133 MHz LPDDR3 <br />

Oracle VirtualBox Version 7.1.4 r165100 (Qt6.5.3) <br />
Debian GNU/Linux 12 Bookworm (64-bit) <br />
4000 MB RAM <br />
60 GB Levytilaa <br />
Vagrant ja Master/Minion SaltStackilla <br />

## Oma moduli: Mielenterveyden tukemiseen tarkoitettu oppimis- ja rentoutusympäristö

Ajattelin toteuttaa moduulin, joka luo ympäristön mielenterveyskuntoutujille ja ahdistusta kokeville käyttäjille. Moduuli sisältää rentoutus- ja mindfulness-videoharjoituksen, tunnepäiväkirjan, sekä hengitysharjoituksen. Tavoitteena on tarjota käyttäjälle helposti lähestyttävä ja rauhoittava digitaalinen tila. Toteutuksessa käytän Vagrantia ja Master/Minion-rakennetta SaltStackilla, joka mahdollistaa ympäristön hallinnan ja konfiguroinnin tehokkaasti. Tarkoituksena on saada toimiva moduuli, jota myöhemmin voi täydentää ja asentaa weppisivulle. 

Olen ensimmäiseltä ammatiltani sairaanhoitaja/terveydenhoitaja (ylempi AMK) ja ratkaisukeskeinen terapeutti ja olen tehnyt koko tähänastisen työurani psykiatrian alalla. Huomaan yrittäväni inhimillistää kaiken minkä pystyn, niin kuin näköjäään myös tämän tehtävän. 

Aloitan koko projektin puhtaalta pöydältä. Jos haluat nähdä alkuvalmistelut, ne löytyvät [täältä!](https://github.com/HannaBurman/PalvelintenHallinta/blob/main/H4.md)

Olen yrittänyt koko viikon saada YouTube-videon toimimaan SLS-tiedostossa, mutta ilman minkäännäköistä onnistumista. YouTuben tiukat rajoitukset tekevät lataamisesta hankalaa. Suorat lataukset eivät onnistu, ja HTTP 304 -virhe viittaisi siihen, ettei resurssia ole päivitetty. YouTube-videoiden URL-osoitteet ovat dynaamisia, ja niiden lataaminen vaatii oikean käyttäjäagentin tai lisäparametreja.

file.managed-toiminto ei näköjään sovellukaan YouTube-videoiden lataamiseen, koska se ei tue suorien linkkien käsittelyä. Lopulta päätin vaihtaa lähestymistapaa ja ladata oman veneilyvideon (kyllä, hyvin minfullia) ensin isäntäkoneelleni, josta siirsin sen masterille. Tämän tein scp:llä (secure copy) komennolla

    % scp /Users/hannaburman/Downloads/yt_video.MP4 vagrant@192.168.88.101:/srv/salt/relaxation/files/

<img width="956" alt="Näyttökuva 2024-12-03 kello 19 58 16" src="https://github.com/user-attachments/assets/78e527fb-2343-48cf-b4f4-27245a549296">

Vaihdoin videonpyörittämisohjelmaksi MPV:n ja sen käyttöönotto toikin sitten vähän toisenlaisia haasteita. Virtuaalikoneissa ei näköjään yleensä ole fyysisiä ääni- tai näytönohjaimia, mikä aiheuttaa virheitä, joten ratkaisuksi päätin ohjata MPV:tä välttämään grafiikan ja äänen käyttöä. Näin sain lopulta SLS-tiedostosta idempotentin, ja kaikki toimi odotetusti, tavallaan.

    $ sudo nano /srv/salt/relaxation/install_environment.sls

<img width="698" alt="Näyttökuva 2024-12-03 kello 19 44 08" src="https://github.com/user-attachments/assets/5d6377d6-6e49-42b1-b288-b1e94ebfe4cd">

    $ sudo salt '*' state.apply relaxation.install_environment

<img width="690" alt="Näyttökuva 2024-12-03 kello 19 45 43" src="https://github.com/user-attachments/assets/e6c4da23-5630-4402-b26f-2f8c5e72c238">
<img width="690" alt="Näyttökuva 2024-12-03 kello 19 46 27" src="https://github.com/user-attachments/assets/fea2141b-1859-43da-b31b-8df98907dd3c">
